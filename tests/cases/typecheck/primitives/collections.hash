// run=pass, stage=typecheck, skip=true

ensure := <T> => (t: T) => {};

main := () => {
  ensure<List<i32>>([1, 2, 3]);

  [...rest] := ["1", "2", "3"];
  ensure<List<str>>(rest);

  match ["1", "2", "3"] {
    [first, ...rest] => {
      ensure<str>(first);
      ensure<List<str>>(rest);
    };
    [...best] => {
    ensure<List<str>>(best);
    };
  }

  // @@Todo: add this once i32 can implement hash (recursive scopes).
  // ensure<Set<i32>>(set!{1, 2, 3});
  // ensure<Map<i32, str>>(map!{1: "1", 2: "2", 3: "3"});
};
